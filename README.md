### О проекте:
Все построено на `FastAPI`. Для взаимодействия с БД используется `SQLAlchemy`. В качестве самой БД `PostgreSQL`. Конфигурирует БД и заполняет ее тестовыми данными `Alembic`. Так же используется `Redis` для хранения уже не валидных, но еще не закончившихся токенов доступа, по сути `блеклист`. Можно, конечно хранить их базе, но тогда мы будем выполнять лишний селект при выполнении каждого ендпоинта с проверкой доступа. А еще базу придется чистить или писать скрипты, которые будут делать это сами. Поэтому логичнее кешировать все через Redis на время жизни токена, потом хранить их не будет смысла, они закончатся. 

Все параметры, переменные окружения и `URL` собираются через `pytdentic_settings`. Так же мы валидируем данные через `pytdantic`.

Настроена виртуализация через `Docker`. Контейнеры `PostgreSQL` и `Redis` развертываются автоматически через `docker compose`. Также композер сам запустит `uvicorn` и скрипт `alembic` для конфигурации и заполнения БД тестовыми данными.

Файл `.env` добавлен на `git` не по ошибке. А что бы клонеры могли поднимать приложение одной командой.


### Функционал:
Реализован весь стандартный функционал для авторизации и аутентификации через систему `access/refresh` токенов. А так же два ендпоинта для работы с товарами.

Все юзеры в БД могут иметь рад статусов:
- `adimn` - админ
- `seller` - продавец
- `buyer` - покупатель
- `activate` - активен

Продавцам доступен только ендпоинт создания товаров, а покупателям только ендпоинт, который возвращает список товаров. Оба эти ендпоинта расшифруют `access` и проверят следующие параметры: кем является пользователь `buyer` или `seller`, а так же проверит наличие его `access` в блеклисте.

Админ может менять статусы пользователей `seller` и `buyer` через специальный ендпоинт.

Ендпоинт удаления пользователя доступен только авторизированным пользователям, после чего в БД его статус `activate` меняется с `Ture` на `False`

Ендпоинт логина созадст `accress` и `refresh`, после чего сохранит `refresh` в БД для дальнейших проверок и отправит оба токена обратно юзеру

Есть ендпоинт обновления токенов, который переписывает `refresh` в БД, и отправляет в ответе `refresh` и `access` юзеру

Ендпоинт логаута сносит `refresh` из бд и добавляет `access` в блеклист в `Redis`.


### Запуск
Входим в директорию проекта, выполняем: 
`docker compose up -d`

При этом развернется контейнер с `Redis`, контейнер с `PostgreSQL`, если с первыми двумя контейнерами не возникнет проблем, развернется контейнер с приложением. Приложение после развертывания сконфигурирует `PostgreSQL` и заполнит ее тестовыми данными.

Переходим по адресу через браузер: 
`http://127.0.0.1:8000/docs#/`

`Swagger` нарисует инерфейс для удобного взаимодействия с API

### Тестовые данные:
Есть три тестовых юзера:
- Админ: `admin_user` Пароль: `1234`
- Админ: `buyer_user` Пароль: `1234`
- Админ: `seller_user` Пароль: `1234`

А так же список товаров. Который доступен покупателям только для просмотра. А добавление туда товаров доступно только для продавцов. При этом просмотр товаров для продавцов не доступен.
